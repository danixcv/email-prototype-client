<div class="email-view my-theme">
  <ng-container *ngIf="!editMode">
    <h2>Email list</h2>
    <mat-list>
        <mat-list-item *ngFor="let email of emailList">
          <div class="email-item">
            <span>{{email.name}}</span>
            <button mat-raised-button color="primary" (click)="onEdit(email.id!)">Edit</button>
            <button mat-raised-button color="warn" (click)="onDelete(email.id!)">Delete</button>
          </div>
        </mat-list-item>
    </mat-list>
    <button mat-button (click)="onAddNew()">Add new</button>
  </ng-container>
  <ng-container *ngIf="editMode">
    <h2 *ngIf="$any(form.value).id">Edit Email</h2>
    <h2 *ngIf="!$any(form.value).id">Create Email</h2>
    <form class="email-form" [formGroup]="form">
      <mat-form-field appearance="fill">
        <mat-label>Name</mat-label>
        <input matInput formControlName="name" type="text">
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Watched Folder</mat-label>
        <input matInput formControlName="watchedFolder" type="text">
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Provider</mat-label>
        <mat-select formControlName="provider">
          <mat-option *ngFor="let provider of providerList" [value]="provider">
            {{provider}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <p><mat-checkbox formControlName="storeAttachments" name="some_name" checked="true">Store Attachments</mat-checkbox></p>
    </form>
    <button mat-raised-button color="primary" (click)="onSave()" [disabled]="form.invalid">Save</button>
    <button mat-button (click)="onCancel()">Cancel</button>
  </ng-container>
</div>
